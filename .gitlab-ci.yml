#This file requires all libraries to be installed, for more information see the readme

stages:
- validate
- build
- test

# Static Type Analysis
check:
  stage: validate
  script:
    - cppcheck . --enable=all -I *.hpp > cppcheck.txt
  artifacts:
    paths:
    - cppcheck.txt

# Build the program
build:
  stage: build
  script: 
    - mkdir build
    - cd build
    - cmake ..
    - make OrangeBall

# run tests
test:
  stage: test
  script:
    - mkdir build
    - cd build
    - cmake ..
    - make RunUnitTests
    - tests/RunUnitTests --gtest_repeat=10 --gtest_output=xml:testOutput.xml
  artifacts:
    paths:
    - testOutput.xml